<% layout('layouts/subBoilerplate') %>
	<!-- Modal DELETE brand -->
	<div class="modal fade" id="brandModalDelete" tabindex="-1" aria-labelledby="brandModalDeleteLabel"
		aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<h1 class="modal-title fs-5" id="brandModalDeleteLabel">Konfirmasi
						Penghapusan Katalog</h1>
					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
				</div>
				<div class="modal-body">
					Apakah anda ingin menghapus katalog <b>
						<%= getBrand.brandName %>
					</b>?
				</div>
				<div class="modal-footer">
					<form action="/brand/brandDelete/<%= getBrand._id %>?_method=DELETE" method="post">
						<button class="btn btn-danger">Hapus</button>
					</form>
				</div>
			</div>
		</div>
	</div>
	<!-- Modal TAMBAH produk -->
	<div class="modal fade" id="productModalAdd" tabindex="-1" aria-labelledby="productModalAddLabel"
		aria-hidden="true">
		<div class="modal-dialog modal-lg">
			<div class="modal-content">
				<div class="modal-header">
					<h1 class="modal-title fs-5" id="productModalAddLabel">Tambah Produk</h1>
					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
				</div>
				<form action="/brand/brandAdd/<%= getBrand._id %>" method="post">
					<div class="modal-body">
						<div class="mb-3">
							<label for="productName" class="col-form-label">Nama Produk:</label>
							<input type="text" class="form-control" name="product[productName]" id="productName"
								required>
						</div>
						<div class="mb-3">
							<label for="productPrice" class="col-form-label">Harga Produk:</label>
							<input type="number" class="form-control" name="product[productPrice]" id="productPrice"
								required>
						</div>
						<div class="mb-3">
							<label for="productImg" class="col-form-label">Foto Produk:</label>
							<input type="url" class="form-control" name="product[productImg]" id="productImg" required>
						</div>
						<div class="mb-3">
							<label for="productImg" class="col-form-label">Deskripsi Produk:</label>
							<textarea class="form-control" name="product[productDesc]" id="productDesc" cols="30"
								rows="10"></textarea>
						</div>
						<div class="mb-3">
							<label for="productQty" class="col-form-label">Qty Produk:</label>
							<input type="number" class="form-control" name="product[productQty]" id="productQty"
								required>
						</div>
						<div class="mb-3">
							<label for="productStatus" class="col-form-label">Status Produk:</label>
							<div class="form-check">
								<input class="form-check-input" type="radio" name="product[productStatus]" value="1"
									id="radioAktif">
								<label class="form-check-label" for="radioAktif">
									Aktif
								</label>
							</div>
							<div class="form-check">
								<input class="form-check-input" type="radio" name="product[productStatus]" value="0"
									id="radioNonAktif">
								<label class="form-check-label" for="radioNonAktif">
									Non-Aktif
								</label>
							</div>
						</div>
						<input type="hidden" class="form-control" name="product[brandID]" id="brandID"
							value="<%= getBrand._id %>" required>
					</div>
					<div class="modal-footer">
						<button type="submit" class="btn btn-success">Simpan</button>
					</div>
				</form>

			</div>

		</div>
	</div>
	<!-- Modal EDIT brand-->
	<div class="modal fade" id="brandModalEdit" tabindex="-1" aria-labelledby="brandModalEditLabel" aria-hidden="true">
		<div class="modal-dialog modal-lg">
			<div class="modal-content">
				<div class="modal-header">
					<h1 class="modal-title fs-5" id="brandModalEditLabel">Edit Brand</h1>
					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
				</div>
				<form action="/brand/brandEdit/<%= getBrand._id %>?_method=PUT" method="post">
					<div class="modal-body">
						<div class="mb-3">
							<label for="brandName" class="col-form-label">Nama Brand:</label>
							<input type="text" class="form-control" name="brand[brandName]" id="brandName"
								value="<%= getBrand.brandName %>" required>
						</div>
						<div class="mb-3">
							<label for="brandLogo" class="col-form-label">Logo Brand:</label>
							<input type="url" class="form-control" name="brand[brandLogo]" id="brandLogo"
								value="<%= getBrand.brandLogo %>" required>
						</div>
					</div>
					<div class="modal-footer">
						<button type="submit" class="btn btn-warning">Simpan</button>
					</div>
				</form>
			</div>
		</div>
	</div>
	<% const renderIcon=(w, h, icon)=> { %>
		<svg xmlns="http://www.w3.org/2000/svg" width="<%= w %>" height="<%= h %>" fill="currentColor"
			class="<%= icon %>" viewBox="0 0 16 16">
			<path
				d="M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z" />
			<path fill-rule="evenodd"
				d="M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5v11z" />
		</svg>
		<% } %>
			<div class="d-flex py-5" id="brandProfile">
				<img class="border border-dark-subtle" src="<%= getBrand.brandLogo %> " alt="..." style="
            width: 100px; height: 100px;margin-right: 20px;
            box-shadow: 10px 10px 14px -4px rgba(0,0,0,0.43);
-webkit-box-shadow: 10px 10px 14px -4px rgba(0,0,0,0.43);
-moz-box-shadow: 10px 10px 14px -4px rgba(0,0,0,0.43);" class="rounded">
				<div class="row" style="width: 100%;">
					<h1 style="font-size: 32px;">
						<%= getBrand.brandName %>
							<button style="all: unset; cursor: pointer;" data-bs-toggle="modal"
								data-bs-target="#brandModalEdit">
								<%= renderIcon(16,16,"bi bi-pencil-square") %>
							</button>
					</h1>

					<div>
						<button class="btn btn-success" type="button" data-bs-toggle="modal"
							data-bs-target="#productModalAdd">Tambah</button>
						<% if(getProduct==0 && getProductInactive==0) {%>
							<button class="btn btn-danger" type="button" data-bs-toggle="modal"
								data-bs-target="#brandModalDelete">Hapus</button>
							<% } %>
					</div>
				</div>
			</div>
			<%- include('../partials/productTabs') %>
				<div class="tab-content" id="myTabContent">
					<div class="tab-pane fade show active" id="active-tab-pane" role="tabpanel"
						aria-labelledby="active-tab" tabindex="0">
						<% if(getProduct==0) {%>
							<%- include('../partials/emptyMsg') %>
								<% } else {%>
									<div class="row row-cols-1 row-cols-md-5 g-4 pt-4">
										<% let i=0; %>
											<% console.log(getProduct.length) %>
												<% for(let product of getProduct) {%>
													<!-- Modal DELETE -->
													<div class="modal fade" id="productModalDelete" tabindex="-1"
														aria-labelledby="productModalDeleteLabel" aria-hidden="true">
														<div class="modal-dialog">
															<div class="modal-content">
																<div class="modal-header">
																	<h1 class="modal-title fs-5"
																		id="productModalDeleteLabel">
																		Konfirmasi
																		Penghapusan Produk</h1>
																	<button type="button" class="btn-close"
																		data-bs-dismiss="modal"
																		aria-label="Close"></button>
																</div>
																<div class="modal-body">
																	Apakah anda ingin menghapus <b>
																		<%= getProduct[i].productName %>
																			<%= i %>

																	</b>?
																</div>
																<div class="modal-footer">
																	<form
																		action="/brand/productDelete/<%= product._id %>?_method=DELETE"
																		method="post">
																		<input type="hidden" id="brandID" name="brandID"
																			value="<%= product.brandID %>">
																		<button class="btn btn-danger">Hapus</button>
																	</form>
																</div>
															</div>
														</div>
													</div>

													<!-- sidebar EDIT product -->
													<!-- <div class="modal fade" id="productModalEdit" tabindex="-1"
													aria-labelledby="productModalEditLabel" aria-hidden="true">
													<div class="modal-dialog modal-lg">
														<div class="modal-content">
															<div class="modal-header">
																<h1 class="modal-title fs-5" id="productModalEditLabel">
																	Edit
																	Produk</h1>
																<button type="button" class="btn-close"
																	data-bs-dismiss="modal" aria-label="Close"></button>
															</div>
															<form
																action="/brand/brandEdit/<%= getBrand._id %>?_method=PUT"
																method="post">
																<div class="modal-body">
																	<div class="mb-3">
																		<label for="brandName"
																			class="col-form-label">Nama
																			Brand:</label>
																		<input type="text" class="form-control"
																			name="brand[brandName]" id="brandName"
																			value="<%= getBrand.brandName %>" required>
																	</div>
																	<div class="mb-3">
																		<label for="brandLogo"
																			class="col-form-label">Logo
																			Brand:</label>
																		<input type="url" class="form-control"
																			name="brand[brandLogo]" id="brandLogo"
																			value="<%= getBrand.brandLogo %>" required>
																	</div>
																</div>
																<div class="modal-footer">
																	<button type="submit"
																		class="btn btn-warning">Simpan</button>
																</div>
															</form>
														</div>
													</div>
												</div> -->
													<div class="col">
														<div class="card">
															<img src="<%= product.productImg %>" class="card-img-top"
																alt="...">
															<div class="card-body">
																<h5 class="card-title" style="overflow: hidden;
                                                text-overflow: ellipsis;
                                                display: -webkit-box;
                                                -webkit-line-clamp: 2; 
                                                        line-clamp: 2; 
                                                -webkit-box-orient: vertical;">
																	<%= product.productName %>
																		(<%= i %>)
																</h5>
																<p class="card-text" style="overflow: hidden;
                                                text-overflow: ellipsis;
                                                display: -webkit-box;
                                                -webkit-line-clamp: 3; 
                                                        line-clamp: 2; 
                                                -webkit-box-orient: vertical;">
																	<%= product.productDesc %>
																</p>
															</div>

															<ul class="list-group list-group-flush">
																<li class="list-group-item fw-bold">
																	<!-- Rp.10.000,00 -->
																	<%= product.productPrice %>
																</li>
															</ul>
															<div class="card-body d-flex justify-content-between">
																<button type="button" data-bs-toggle="modal"
																	data-bs-target="#productModalEdit"
																	class="btn btn-outline-warning col-5 btn-sm">Edit</button>
																<button type="button" data-bs-toggle="modal"
																	data-bs-target="#productModalDelete"
																	class="btn btn-outline-danger col-5 btn-sm">Delete</button>
															</div>
															<div class="card-footer">
																<small class="text-muted">Produk tersedia <%=
																		product.productQty %>
																</small>
															</div>
														</div>
													</div>
													<% i++; %>
														<% } %>
									</div>
									<% } %>
					</div>
					<!-- BATAS -->
					<div class="tab-pane fade" id="inactive-tab-pane" role="tabpanel" aria-labelledby="inactive-tab"
						tabindex="0">
						<% if(getProductInactive==0) {%>
							<%- include('../partials/emptyMsg') %>
								<% } else {%>
									<div class="row row-cols-1 row-cols-md-5 g-4 pt-4">
										<% for(let product of getProductInactive) {%>
											<!-- Modal DELETE -->
											<div class="modal fade" id="productModalDelete" tabindex="-1"
												aria-labelledby="productModalDeleteLabel" aria-hidden="true">
												<div class="modal-dialog">
													<div class="modal-content">
														<div class="modal-header">
															<h1 class="modal-title fs-5" id="productModalDeleteLabel">
																Konfirmasi
																Penghapusan Produk</h1>
															<button type="button" class="btn-close"
																data-bs-dismiss="modal" aria-label="Close"></button>
														</div>
														<div class="modal-body">
															Apakah anda ingin menghapus <b>
																<%= product.productName %>
															</b>?
														</div>
														<div class="modal-footer">
															<form
																action="/brand/productDelete/<%= product._id %>?_method=DELETE"
																method="post">
																<input type="hidden" id="brandID" name="brandID"
																	value="<%= product.brandID %>">
																<button class="btn btn-danger">Hapus</button>
															</form>
														</div>
													</div>
												</div>
											</div>
											<div class="col">
												<div class="card">
													<img src="<%= product.productImg %>" class="card-img-top" alt="...">
													<div class="card-body">
														<h5 class="card-title" style="overflow: hidden;
                                                text-overflow: ellipsis;
                                                display: -webkit-box;
                                                -webkit-line-clamp: 2; 
                                                        line-clamp: 2; 
                                                -webkit-box-orient: vertical;">
															<%= product.productName %>
														</h5>
														<p class="card-text" style="overflow: hidden;
                                                text-overflow: ellipsis;
                                                display: -webkit-box;
                                                -webkit-line-clamp: 3; 
                                                        line-clamp: 2; 
                                                -webkit-box-orient: vertical;">
															<%= product.productDesc %>
														</p>
													</div>
													<ul class="list-group list-group-flush">
														<li class="list-group-item fw-bold">
															<!-- Rp.10.000,00 -->
															<%= product.productPrice %>
														</li>
													</ul>
													<div class="card-body d-flex justify-content-between">
														<a href="#"
															class="btn btn-outline-warning col-5 btn-sm">Edit</a>
														<button type="button" data-bs-toggle="modal"
															data-bs-target="#productModalDelete"
															class="btn btn-outline-danger col-5 btn-sm">Delete</button>
													</div>
													<div class="card-footer">
														<small class="text-muted">Produk tersedia <%= product.productQty
																%>
														</small>
													</div>
												</div>
											</div>
											<% } %>
									</div>
									<% } %>
					</div>
				</div>